## nodejs 事件循环

1. 执行步骤：

    `同步代码` -> `微任务` -> `timers` -> `微任务` -> `i/o callbacks` -> `微任务` -> `idle, prepare` -> `微任务` -> `poll` -> `微任务` -> `check` -> `微任务` -> `close callbacks` -> `微任务` -> `timers` ... (参考官方文档)

2. 两个微任务队列：

    - `process.nextTick` 注册的回调队列
    - `其他微任务队列`，该队列包括 `promise` 的注册回调任务等 ...

当微任务执行过程中，当前任务所在队列中又加入新的任务，则会继续执行，直到队列清空才会执行下一队列任务。
所以当一个微任务是为当前队列继续添加当前的微任务时，则会导致当前队列任务永远执行不完，从而阻塞事件循环。